<body>
  <h1>Setup Nama Tim</h1>
  <input id="teamName" placeholder="Nama Tim"/>
  <button onclick="start()">Mulai Game</button>

  <script type="module">
    import { ref, set } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";
    import { db } from "./firebase.js";

    async function start() {
      const team = document.getElementById("teamName").value.trim();
      if (!team) { alert("Isi nama tim!"); return; }

      const gameId = Date.now().toString();

      const text = await fetch("words.txt").then(r=>r.text());
      const all = text.split("\n").map(w=>w.trim()).filter(Boolean);
      const selected = all.sort(()=>Math.random()-0.5).slice(0,4);

      await set(ref(db, `games/${gameId}`), {
        teamName: team,
        words: selected,
        rounds: {}
      });

      console.log("Data tersimpan:", gameId, selected);
      window.location.href = `words.html?gameId=${gameId}&team=${encodeURIComponent(team)}`;
    }

    window.start = start;
  </script>
</body>
